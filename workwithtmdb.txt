const options = {
    method: 'GET',
    headers: {
        accept: 'application/json',
        Authorization: 'Bearer eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI3YzE0MjdlYTJlNzU3N2VjMDMyNjNkYTI2NDVjYTI4MiIsIm5iZiI6MTc0NTY1MDUwMC41MTYsInN1YiI6IjY4MGM4MzQ0MmIzOTU5NTYwZDZlMjZiNCIsInNjb3BlcyI6WyJhcGlfcmVhZCJdLCJ2ZXJzaW9uIjoxfQ.raRCBZc33_9Iyc1tB72gPxPl8o2n5Q7NX8nTDjlr61U'
    }
}; 

const findMovie =async function (){
    // http://www.omdbapi.com/?apikey=3bc0d31c&t=La+la+land&y=2016
    let n = document.querySelector("#name").value;
    // let year = document.querySelector("#year").value;
    const movieName = n.replace(/ /g, "+");
    let baseUrl=`https://api.themoviedb.org/3/search/movie?query=${movieName}&y=include_adult=false&language=en-US&page=1`;
    console.log(baseUrl);

    fetch(baseUrl, options)
        .then( res => res.json())
        .then( res => console.log(res))
        .catch( err => console.error(err));
    
}
const findPoster =async function (){
    let baseUrl="http://img.omdbapi.com/?apikey=3bc0d31c&t=";
    // http://www.omdbapi.com/?apikey=3bc0d31c&t=La+la+land&y=2016
    let n = document.querySelector("#name").value;
    // let year = document.querySelector("#year").value;
    const movieName = n.replace(/ /g, "&20");
    // const fullUrl = `${baseUrl}${movieName}&y=${year}`;
    console.log(fullUrl);
    
    const response=await fetch(fullUrl);
    const json=await response.json();
    return json;
    
}
const searchHandler=async ()=>{
    // if(!movieName){
    //     alert("please enter movieName!")
    // }
    // if(!year){
    //     alert("please enter year!")
    // }
    const currentData=await findMovie(name);
    console.log(currentData)

    // const currentData2=await findPoster(name);
    console.log(currentData)
    
}

document.querySelector("#search").addEventListener("click", searchHandler);
 

{Title: 'La La Land', Year: '2016', Rated: 'PG-13', Released: '25 Dec 2016', Runtime: '128 min', …}
Actors
: 
"Ryan Gosling, Emma Stone, Rosemarie DeWitt"
Awards
: 
"Won 6 Oscars. 242 wins & 307 nominations total"
BoxOffice
: 
"$151,101,803"
Country
: 
"United States, Hong Kong"
DVD
: 
"N/A"
Director
: 
"Damien Chazelle"
Genre
: 
"Comedy, Drama, Music"
Language
: 
"English, Cantonese"
Metascore
: 
"94"
Plot
: 
"When Sebastian, a pianist, and Mia, an actress, follow their passion and achieve success in their respective fields, they find themselves torn between their love for each other and their careers."
Poster
: 
"https://m.media-amazon.com/images/M/MV5BMzUzNDM2NzM2MV5BMl5BanBnXkFtZTgwNTM3NTg4OTE@._V1_SX300.jpg"
Production
: 
"N/A"
Rated
: 
"PG-13"
Ratings
: 
(3) [{…}, {…}, {…}]
Released
: 
"25 Dec 2016"
Response
: 
"True"
Runtime
: 
"128 min"
Title
: 
"La La Land"
Type
: 
"movie"
Website
: 
"N/A"
Writer
: 
"Damien Chazelle"
Year
: 
"2016"
imdbID
: 
"tt3783958"
imdbRating
: 
"8.0"
imdbVotes
: 
"707,453"